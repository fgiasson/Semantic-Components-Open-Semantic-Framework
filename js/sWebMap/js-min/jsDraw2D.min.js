function jsColor(){function B(C){if("#"==C.charAt(0))A=C;else if(isNaN(C))switch(C.toLowerCase()){case "aqua":A="#00FFFF";break;case "black":A="#000000";break;case "blue":A="#0000FF";break;case "fuchsia":A="#FF00FF";break;case "green":A="#008000";break;case "gray":A="#808080";break;case "lime":A="#00FF00";break;case "maroon":A="#800000";break;case "navy":A="#000080";break;case "olive":A="#808000";break;case "purple":A="#800080";break;case "red":A="#FF0000";break;case "silver":A="#C0C0C0";break;case "teal":A=
"#008080";break;case "white":A="#FFFFFF";break;case "yellow":A="#FFFF00"}else A="#"+C;Z(A)||(A="#000000")}function E(){return Z(A)}function S(C,A,E){if(0>C||255<C||0>A||255<A||0>E||255<E)return!1;for(C=(Math.round(E)+256*Math.round(A)+65536*Math.round(C)).toString(16)+"";6>C.length;)C="0"+C;return"#"+C}function Z(C){var A,E;"#"==C.charAt(0)&&(C=C.substring(1,7));A=parseInt(C.substring(0,2),16);E=parseInt(C.substring(2,4),16);C=parseInt(C.substring(4,6),16);return 0>A||255<A||0>E||255<E||0>C||255<
C?!1:[A,E,C]}var A="#000000";switch(arguments.length){case 1:B(arguments[0]);break;case 3:A=S(arguments[0],arguments[1],arguments[2]),!1==A&&(A="#000000")}this.setHex=B;this.getHex=function(){return A};this.setRGB=function(C,E,O){A=S(C,E,O);!1==A&&(A="#000000")};this.getRGB=E;this.getDarkerShade=function(A){var V,O,S,w=E();isNaN(A)||(V=parseInt(w[0]-A),O=parseInt(w[1]-A),S=parseInt(w[2]-A));0>V&&(V=0);0>O&&(O=0);0>S&&(S=0);return new jsColor(V,O,S)};this.getLighterShade=function(A){var S,O,B,w=E();
isNaN(A)||(S=parseInt(w[0]+A),O=parseInt(w[1]+A),B=parseInt(w[2]+A));255<S&&(S=255);255<O&&(O=255);255<B&&(B=255);return new jsColor(S,O,B)};this.rgbToHex=S;this.hexToRgb=Z}function jsFont(B,E,S,Z,A){this.variant=this.style=this.size=this.weight=this.family=null;B&&""!=B&&(this.family=B);E&&""!=E&&(this.weight=E);S&&""!=S&&(this.size=S);Z&&""!=Z&&(this.style=Z);A&&""!=A&&(this.variant=A)}
function jsPen(B,E){this.color=new jsColor;this.width="1px";0<arguments.length&&(this.color=B);2<=arguments.length&&(this.width=E);isNaN(E)||(this.width=E+"px")}function jsPoint(B,E){this.y=this.x=0;2==arguments.length&&(this.x=B,this.y=E)}
function jsGraphics(B){function E(i){return"cartecian"==ba?new jsPoint(i.x*G+w.x,w.y-i.y*G):new jsPoint(i.x*G+w.x,i.y*G+w.y)}function S(i,g){function e(){this.xMin=this.xMax=0;this.isVertex=!1}var c,d,b,a;c=i.x;d=g.x;b=i.y;a=g.y;var f=[],m=Math.abs(a-b)>Math.abs(d-c);if(m){var k=c;c=b;b=k;k=d;d=a;a=k}c>d&&(k=c,c=d,d=k,k=b,b=a,a=k);var k=d-c,j=Math.abs(a-b),h=k/2,o=b;a=b<a?1:-1;for(x=c;x<=d;x++)m?(f[x]=new e,f[x].xMin=o,f[x].xMax=o,x==c&&o==b&&(f[x].isVertex=!0)):f[o]?f[o].xMax=x:(f[o]=new e,f[o].xMin=
x,f[o].xMax=x,x==c&&o==b&&(f[o].isVertex=!0)),h-=j,0>h&&(o+=a,h+=k);return f}function Z(i,g,e,c){if(!i||!g||!e||!c)return!1;var e=e*G,c=c*G,d=T.appendChild(document.createElement("div")),b=[];phCenter=E(g);var a=parseInt(i.width);if(1>=a){var f=phCenter,a=e;if(!i||!f||!a||!c)d=!1;else{for(var d=T.appendChild(document.createElement("div")),b=[],g=parseInt(i.width),i=i.color.getHex(),m=Math.round(a/2),k=Math.round(c/2),c=f.x,f=f.y,a=0,e=k,m=m*m,k=k*k,j=e,h=a,o;k*a<m*e;)a++,0<=k*a*a+m*(e-0.5)*(e-0.5)-
m*k&&e--,1==a&&e!=j&&(b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c+a)+"px;top:"+(f+e)+"px;width:1px;height:1px;background-color:"+i+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c+a)+"px;top:"+(f-e)+"px;width:1px;height:1px;background-color:"+i+'"></DIV>'),e!=j&&(o=a-h,b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c+h)+"px;top:"+(f+j-g+1)+"px;height:"+g+"px;width:"+o+"px;background-color:"+i+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+
(c-h-o+1)+"px;top:"+(f+j-g+1)+"px;height:"+g+"px;width:"+o+"px;background-color:"+i+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c+h)+"px;top:"+(f-j)+"px;height:"+g+"px;width:"+o+"px;background-color:"+i+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c-h-o+1)+"px;top:"+(f-j)+"px;height:"+g+"px;width:"+o+"px;background-color:"+i+'"></DIV>',j=e,h=a),k*a>=m*e&&(o=a-h+1,b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c+
h)+"px;top:"+(f+j-g+1)+"px;height:"+g+"px;width:"+o+"px;background-color:"+i+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c-h-o+1)+"px;top:"+(f+j-g+1)+"px;height:"+g+"px;width:"+o+"px;background-color:"+i+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c+h)+"px;top:"+(f-j)+"px;height:"+g+"px;width:"+o+"px;background-color:"+i+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c-h-o+1)+"px;top:"+(f-j)+"px;height:"+
g+"px;width:"+o+"px;background-color:"+i+'"></DIV>');j=e;for(h=a;0!=e;)e--,0>=k*(a+0.5)*(a+0.5)+m*e*e-m*k&&a++,a!=h&&(o=j-e,b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c+h-g+1)+"px;top:"+(f+j-o+1)+"px;width:"+g+"px;height:"+o+"px;background-color:"+i+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c+h-g+1)+"px;top:"+(f-j)+"px;width:"+g+"px;height:"+o+"px;background-color:"+i+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+
(c-h)+"px;top:"+(f+j-o+1)+"px;width:"+g+"px;height:"+o+"px;background-color:"+i+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c-h)+"px;top:"+(f-j)+"px;width:"+g+"px;height:"+o+"px;background-color:"+i+'"></DIV>',h=a,j=e),0==e&&(o=j-e+1,b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c+h-g+1)+"px;top:"+(f+j-o+1)+"px;width:"+g+"px;height:"+o+"px;background-color:"+i+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c+h-g+
1)+"px;top:"+(f-j)+"px;width:"+g+"px;height:"+o+"px;background-color:"+i+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c-h)+"px;top:"+(f+j-o+1)+"px;width:"+g+"px;height:"+o+"px;background-color:"+i+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c-h)+"px;top:"+(f-j)+"px;width:"+g+"px;height:"+o+"px;background-color:"+i+'"></DIV>',h=a,j=e);d.innerHTML=b.join("")}return d}g=i.color.getHex();k=Math.round(e/2);j=Math.round(c/2);i=phCenter.x;
c=phCenter.y;f=j-a+1;a=A(phCenter,2*(k-a+1),2*f)[0];e=0;m=j;k*=k;j*=j;o=m;for(var s,n,l=1;j*e<k*m;)if(e++,0<=j*e*e+k*(m-0.5)*(m-0.5)-k*j&&m--,m+1<f)m!=o&&(s=i-e+1,n=e-1+1-a[o],b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+s+"px;top:"+(c-o)+"px;width:"+n+"px;height:"+l+"px;background-color:"+g+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+s+"px;top:"+(c+o)+"px;width:"+n+"px;height:"+l+"px;background-color:"+g+'"></DIV>',s=s+2*(e-1)+1-n,b[b.length]=
'<DIV style="position:absolute;overflow:hidden;left:'+s+"px;top:"+(c-o)+"px;width:"+n+"px;height:"+l+"px;background-color:"+g+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+s+"px;top:"+(c+o)+"px;width:"+n+"px;height:"+l+"px;background-color:"+g+'"></DIV>',o=m),j*e>=k*m&&(s=i-e,n=e+1-a[o],b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+s+"px;top:"+(c-m)+"px;width:"+n+"px;height:"+l+"px;background-color:"+g+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+
s+"px;top:"+(c+m)+"px;width:"+n+"px;height:"+l+"px;background-color:"+g+'"></DIV>',s=s+2*e+1-n,b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+s+"px;top:"+(c-m)+"px;width:"+n+"px;height:"+l+"px;background-color:"+g+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+s+"px;top:"+(c+m)+"px;width:"+n+"px;height:"+l+"px;background-color:"+g+'"></DIV>');else if(1==e&&m!=o&&(b[b.length]='<DIV style="position:absolute;overflow:hidden;width:1px;height:1px;left:'+
i+"px;top:"+(c+o-1)+"px;background-color:"+g+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;width:1px;height:1px;left:'+i+"px;top:"+(c-o)+"px;background-color:"+g+'"></DIV>'),m!=o&&(b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(i-e+1)+"px;top:"+(c-o)+"px;width:"+(2*(e-1)+1)+"px;height:"+l+"px;background-color:"+g+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(i-e+1)+"px;top:"+(c+o)+"px;width:"+(2*(e-1)+1)+"px;height:"+l+"px;background-color:"+
g+'"></DIV>',o=m),m==f||0==m)b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(i-e)+"px;top:"+(c-m)+"px;width:"+(2*e+1)+"px;height:"+l+"px;background-color:"+g+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(i-e)+"px;top:"+(c+m)+"px;width:"+(2*e+1)+"px;height:"+l+"px;background-color:"+g+'"></DIV>';h=e;o=m;for(s=a[m];0!=m;)if(m--,0>=j*(e+0.5)*(e+0.5)+k*m*m-k*j&&e++,m+1<f){if(e!=h||a[m]!=s)l=o-m,s=i-h,n=h+1-a[m+1],b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+
s+"px;top:"+(c-o)+"px;width:"+n+"px;height:"+l+"px;background-color:"+g+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+s+"px;top:"+(c+m+1)+"px;width:"+n+"px;height:"+l+"px;background-color:"+g+'"></DIV>',s=s+2*h+1-n,b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+s+"px;top:"+(c-o)+"px;width:"+n+"px;height:"+l+"px;background-color:"+g+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+s+"px;top:"+(c+m+1)+"px;width:"+n+"px;height:"+
l+"px;background-color:"+g+'"></DIV>',h=e,o=m,s=a[m];0==m&&(l=o-m+1,s=i-e,n=e+1-a[m],b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+s+"px;top:"+(c-o)+"px;width:"+n+"px;height:"+l+"px;background-color:"+g+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+s+"px;top:"+(c+m)+"px;width:"+n+"px;height:"+l+"px;background-color:"+g+'"></DIV>',s=s+2*e+1-n,b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+s+"px;top:"+(c-o)+"px;width:"+n+"px;height:"+
l+"px;background-color:"+g+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+s+"px;top:"+(c+m)+"px;width:"+n+"px;height:"+l+"px;background-color:"+g+'"></DIV>',h=e,o=m,s=a[m])}else if(e!=h&&(l=o-m,b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(i-h)+"px;top:"+(c-o)+"px;width:"+(2*h+1)+"px;height:"+l+"px;background-color:"+g+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(i-h)+"px;top:"+(c+m+1)+"px;width:"+(2*h+1)+"px;height:"+
l+"px;background-color:"+g+'"></DIV>',h=e,o=m,s=a[m]),m==f||0==m)l=o-m+1,b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(i-e)+"px;top:"+(c-o)+"px;width:"+(2*e+1)+"px;height:"+l+"px;background-color:"+g+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(i-e)+"px;top:"+(c+m)+"px;width:"+(2*e+1)+"px;height:"+l+"px;background-color:"+g+'"></DIV>',h=e,o=m,s=a[m];d.innerHTML=b.join("");return d}function A(i,g,e){var g=Math.round(g/2),c=Math.round(e/2);xArray=
[];xArrayI=[];e=0;i=c;g*=g;c*=c;xArray[i]=e;for(xArrayI[i]=e;c*e<g*i;)e++,0<=c*e*e+g*(i-0.5)*(i-0.5)-g*c&&i--,xArray[i]||(xArray[i]=e),xArrayI[i]=e;for(;0!=i;)i--,0>=c*(e+0.5)*(e+0.5)+g*i*i-g*c&&e++,xArray[i]=e,xArrayI[i]=e;return[xArray,xArrayI]}function C(i,g,e,c){if(!i||!g||!e||!c)return!1;var e=e*G,c=c*G,d=T.appendChild(document.createElement("div")),b=[];phCenter=E(g);var a=Math.round(e/2),f=Math.round(c/2),c=phCenter.x,g=phCenter.y,i=i.getHex(),e=0,m=f,a=a*a,f=f*f,k,j;for(j=m;f*e<a*m;)e++,0<=
f*e*e+a*(m-0.5)*(m-0.5)-a*f&&m--,1==e&&m!=j&&(b[b.length]='<DIV style="position:absolute;overflow:hidden;width:1px;height:1px;left:'+c+"px;top:"+(g+j-1)+"px;background-color:"+i+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;width:1px;height:1px;left:'+c+"px;top:"+(g-j)+"px;background-color:"+i+'"></DIV>'),m!=j&&(b[b.length]='<DIV style="position:absolute;overflow:hidden;height:1px;left:'+(c-e+1)+"px;top:"+(g-j)+"px;width:"+(2*e-1)+"px;background-color:"+i+'"></DIV>',b[b.length]=
'<DIV style="position:absolute;overflow:hidden;height:1px;left:'+(c-e+1)+"px;top:"+(g+j)+"px;width:"+(2*e-1)+"px;background-color:"+i+'"></DIV>',j=m),f*e>=a*m&&(b[b.length]='<DIV style="position:absolute;overflow:hidden;height:1px;left:'+(c-e)+"px;top:"+(g-j)+"px;width:"+(2*e+1)+"px;background-color:"+i+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;height:1px;left:'+(c-e)+"px;top:"+(g+j)+"px;width:"+(2*e+1)+"px;background-color:"+i+'"></DIV>');k=e;j=m;for(var h=1;0!=m;)m--,
0>=f*(e+0.5)*(e+0.5)+a*m*m-a*f&&e++,e!=k&&(h=j-m,b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c-k)+"px;top:"+(g-j)+"px;width:"+(2*k+1)+"px;height:"+h+"px;background-color:"+i+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c-k)+"px;top:"+(g+m+1)+"px;width:"+(2*k+1)+"px;height:"+h+"px;background-color:"+i+'"></DIV>',k=e,j=m),0==m&&(h=j-m+1,b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c-k)+"px;top:"+(g-j)+"px;width:"+(2*e+1)+
"px;height:"+h+"px;background-color:"+i+'"></DIV>',b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(c-k)+"px;top:"+(g+m)+"px;width:"+(2*e+1)+"px;height:"+h+"px;background-color:"+i+'"></DIV>');d.innerHTML=b.join("");return d}function V(i,g,e){for(var c=0,d=0,b=i[1].x-1,a=i[1].y-1,f=0,m=1,k=(1-g)*(i[2].x-i[0].x)/2,j=(1-g)*(i[3].x-i[1].x)/2,h=(1-g)*(i[2].y-i[0].y)/2,g=(1-g)*(i[3].y-i[1].y)/2;1>=f;)c=(2*f*f*f-3*f*f+1)*i[1].x+(f*f*f-2*f*f+f)*k+(-2*f*f*f+3*f*f)*i[2].x+(f*f*f-f*f)*j,d=
(2*f*f*f-3*f*f+1)*i[1].y+(f*f*f-2*f*f+f)*h+(-2*f*f*f+3*f*f)*i[2].y+(f*f*f-f*f)*g,c=Math.round(c),d=Math.round(d),c!=b||d!=a?1<c-b||1<d-a||1<b-c||1<a-d?(f-=m,m/=1.1):(e[e.length]=new jsPoint(c,d),b=c,a=d,1<f+m&&(f=1-m)):m*=1.1,f+=m}function O(i,g,e){for(var c=0,d=0,b=i[1].x-1,a=i[1].y-1,f=0,m=1,k=(1-g)*(i[2].x-i[0].x)/2,j=(1-g)*(i[3].x-i[1].x)/2,h=(1-g)*(i[2].y-i[0].y)/2,g=(1-g)*(i[3].y-i[1].y)/2;1>=f;)c=(2*f*f*f-3*f*f+1)*i[1].x+(f*f*f-2*f*f+f)*k+(-2*f*f*f+3*f*f)*i[2].x+(f*f*f-f*f)*j,d=(2*f*f*f-3*
f*f+1)*i[1].y+(f*f*f-2*f*f+f)*h+(-2*f*f*f+3*f*f)*i[2].y+(f*f*f-f*f)*g,c=Math.round(c),d=Math.round(d),c!=b||d!=a?1<c-b||1<d-a||1<b-c||1<a-d?(f-=m,m/=1.1):(e[e.length]=new jsPoint(c,d),b=c,a=d,1<f+m&&(f=1-m)):m*=1.1,f+=m}function ta(i,g,e){function c(){this.i=this.xMin=this.xMax=0}for(var d=[],b,a,f,m,k,j,h=0;h<e.length;h++){k=!1;x=e[h].x;y=e[h].y;if(0!=h&&h+1<e.length&&(1==e[h-1].x-e[h+1].x||1==e[h+1].x-e[h-1].x)&&(1==e[h-1].y-e[h+1].y||1==e[h+1].y-e[h-1].y)&&!d[h-1])k=!0,d[h]=!0;if(!k){m||(m=y);
b||(b=y);a||(a=y);y<b&&(b=y);y>a&&(a=y);i[y]?(f=i[y][i[y].length-1],1==h-f.i?(f.xMin>x&&(f.xMin=x),f.xMax<x&&(f.xMax=x),f.i=h):(i[y][i[y].length]=new c,i[y][i[y].length-1].xMin=x,i[y][i[y].length-1].xMax=x,i[y][i[y].length-1].i=h)):(i[y]=[],i[y][0]=new c,i[y][0].xMin=x,i[y][0].xMax=x,i[y][0].i=h);k=g[g.length-1];j=g[g.length-2];if(k&&j&&(k>y&&j<k||k<y&&j>k))i[k][i[k].length]=i[k][i[k].length-1];g[0]?g[g.length-1]!=y&&(g[g.length]=y):g[0]=y;f=y}}j=k=g[0];for(h=1;k==j;)j=g[g.length-h],h++;if(k&&j&&
(k>g[1]&&j<k||k<g[1]&&j>k))i[k][i[k].length]=i[k][i[k].length-1];m==f&&(g=i[m][0],e=i[f][i[f].length-1],e.xMax>g.xMax&&(i[m][0].xMax=e.xMax),e.xMin<g.xMin&&(i[m][0].xMin=e.xMin),1<i[f].length?i[f].pop():i.pop());return[b,a]}var w=new jsPoint(0,0),G=1,ba="default",T;T=B?B:document.body;var D=null;this.drawLine=function(i,g,e,c){if(!i||!g||!e)return!1;var d=T.appendChild(document.createElement("div"));"physical"!=c?(phPoint0=E(g),phPoint1=E(e)):(phPoint0=new jsPoint(g.x,g.y),phPoint1=new jsPoint(e.x,
e.y));var b,a,g=phPoint0.x,e=phPoint1.x;b=phPoint0.y;a=phPoint1.y;c=i.color.getHex();if(b==a)return g<=e?d.innerHTML='<DIV style="position:absolute;overflow:hidden;left:'+g+"px;top:"+b+"px;width:"+(e-g+1)+"px;height:"+i.width+";background-color:"+c+'"></DIV>':g>e&&(d.innerHTML='<DIV style="position:absolute;overflow:hidden;left:'+e+"px;top:"+b+"px;width:"+(g-e+1)+"px;height:"+i.width+";background-color:"+c+'"></DIV>'),d;if(g==e)return b<=a?d.innerHTML='<DIV style="position:absolute;overflow:hidden;left:'+
g+"px;top:"+b+"px;width:"+i.width+";height:"+(a-b+1)+"px;background-color:"+c+'"></DIV>':b>a&&(d.innerHTML='<DIV style="position:absolute;overflow:hidden;left:'+g+"px;top:"+a+"px;width:"+i.width+";height:"+(b-a+1)+"px;background-color:"+c+'"></DIV>'),d;var f=[],m=Math.abs(e-g),k=Math.abs(a-b),j=parseInt(i.width),i=Math.round(Math.sqrt(j*j/(k*k/(m*m)+1))),m=Math.round(Math.sqrt(j*j-i*i));0==m&&(m=1);0==i&&(i=1);if(k=Math.abs(a-b)>Math.abs(e-g))j=g,g=b,b=j,j=e,e=a,a=j;g>e&&(j=g,g=e,e=j,j=b,b=a,a=j);
var j=e-g,h=Math.abs(a-b),o=j/2,s=b;b=b<a?1:-1;var n,l,p=a=0;k?a=m:p=i;for(x=g;x<=e;x++)k?(x==g?(n=s,l=x):s==n?p+=1:(p+=i,f[f.length]='<DIV style="position:absolute;overflow:hidden;left:'+n+"px;top:"+l+"px;width:"+a+"px;height:"+p+"px;background-color:"+c+'"></DIV>',p=0,n=s,l=x),x==e&&(0!=p?(p+=i,f[f.length]='<DIV style="position:absolute;overflow:hidden;left:'+n+"px;top:"+l+"px;width:"+a+"px;height:"+p+"px;background-color:"+c+'"></DIV>'):(p=i,f[f.length]='<DIV style="position:absolute;overflow:hidden;left:'+
s+"px;top:"+x+"px;width:"+a+"px;height:"+p+"px;background-color:"+c+'"></DIV>'))):(x==g?(n=x,l=s):s==l?a+=1:(a+=m,f[f.length]='<DIV style="position:absolute;overflow:hidden;left:'+n+"px;top:"+l+"px;width:"+a+"px;height:"+p+"px;background-color:"+c+'"></DIV>',a=0,n=x,l=s),x==e&&(0!=a?(a+=m,f[f.length]='<DIV style="position:absolute;overflow:hidden;left:'+n+"px;top:"+l+"px;width:"+a+"px;height:"+p+"px;background-color:"+c+'"></DIV>'):(a=m,f[f.length]='<DIV style="position:absolute;overflow:hidden;left:'+
x+"px;top:"+s+"px;width:"+a+"px;height:"+p+"px;background-color:"+c+'"></DIV>'))),o-=h,0>o&&(s+=b,o+=j);d.innerHTML=f.join("");return d};this.drawRectangle=function(i,g,e,c){if(!i||!g||!e||!c)return!1;var e=Math.round(e*G),c=Math.round(c*G),d=T.appendChild(document.createElement("div")),b=[],a=parseInt(i.width),f=i.color.getHex();if(a>=c||a>=e)return this.fillRectangle(i.color,g,e,c);phPoint=E(g);b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+phPoint.x+"px;top:"+phPoint.y+"px;width:"+
e+"px;height:"+a+"px;background-color:"+f+'"></DIV>';b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+phPoint.x+"px;top:"+(phPoint.y+c-a)+"px;width:"+e+"px;height:"+a+"px;background-color:"+f+'"></DIV>';b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+phPoint.x+"px;top:"+(phPoint.y+a)+"px;width:"+a+"px;height:"+(c-2*a+1)+"px;background-color:"+f+'"></DIV>';b[b.length]='<DIV style="position:absolute;overflow:hidden;left:'+(phPoint.x+e-a)+"px;top:"+(phPoint.y+a)+"px;width:"+
a+"px;height:"+(c-2*a+1)+"px;background-color:"+f+'"></DIV>';d.innerHTML=b.join("");return d};this.fillRectangle=function(i,g,e,c){if(!i||!g||!e||!c)return!1;var e=Math.round(e*G),c=Math.round(c*G),d=T.appendChild(document.createElement("div"));phPoint=E(g);i=i.getHex();d.innerHTML='<DIV style="position:absolute;overflow:hidden;left:'+phPoint.x+"px;top:"+phPoint.y+"px;width:"+e+"px;height:"+c+"px;background-color:"+i+'"></DIV>';return d};this.drawCircle=function(i,g,e){return!i||!g||!e?!1:Z(i,g,2*
e,2*e)};this.drawEllipse=Z;this.fillCircle=function(i,g,e){return!i||!g||!e?!1:C(i,g,2*e,2*e)};this.fillEllipse=C;this.fillArc=function(i,g,e,c,d,b){function a(a,b){var c,d,e=P,g=P,f=!1,i=!1;if(a){var m=!1,o=!1;c=w;d=xDataArraySa;xDataArray2=xDataArrayEa;saDvar=j;eaDvar=h}else{var E=!1,G=!1;c=z;xDataArray2=xDataArraySa;d=xDataArrayEa;saDvar=360-h;eaDvar=360-j}eaDvar>saDvar?xDataArray2[c]&&p+P>=xDataArray2[c].xMin&&p<=xDataArray2[c].xMin?($=xDataArray2[c].xMin,d[c]&&p+P>=d[c].xMax+1&&p<=d[c].xMax+
1?(F=d[c].xMax+1,e=F-$):e=p+P-$,p=$,f=!0):d[c]&&p+P>=d[c].xMax+1&&p<=d[c].xMax+1?(F=d[c].xMax+1,e=F-p,f=!0):90<eaDvar&&90>saDvar&&(f=!0):(d[c]&&p+P>=d[c].xMax+1&&p<=d[c].xMax+1?(F=d[c].xMax+1,e=F-p,f=!0):90>eaDvar&&90>saDvar&&(f=!0),xDataArray2[c]&&p+P>=xDataArray2[c].xMin&&p<=xDataArray2[c].xMin?(W=xDataArray2[c].xMin,g=P-xDataArray2[c].xMin+p,i=!0):90<eaDvar&&90<saDvar&&(W=p,g=P,i=!0));a?(f&&(m=!0),i&&(o=!0),B=e,X=g):(f&&(E=!0),i&&(G=!0),Y=e,I=g);0<=j&&180>j&&0<=h&&180>h&&j>h?E=!0:180<=j&&360>j&&
180<=h&&360>h&&j>h&&(m=!0);W||(W="");p||(p="");if(!b)if(a){if(n!=v||r!=p||q!=W||B!=R||X!=V)if(N=D-l,J&&null!=q&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+q+"px;top:"+(w+1)+"px;width:"+V+"px;height:"+N+"px;background-color:"+s+'"></DIV>'),M&&null!=r&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+r+"px;top:"+(w+1)+"px;width:"+R+"px;height:"+N+"px;background-color:"+s+'"></DIV>'),M||J)r=p,M=m,J=o,v=n,D=l,R=B,V=X,q=W}else if(n!=U||u!=p||A!=W||Y!=O||I!=aa)if(N=
C-l,K&&null!=A&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+A+"px;top:"+(z-N)+"px;width:"+aa+"px;height:"+N+"px;background-color:"+s+'"></DIV>'),L&&null!=u&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+u+"px;top:"+(z-N)+"px;width:"+O+"px;height:"+N+"px;background-color:"+s+'"></DIV>'),L||K)u=p,L=E,K=G,U=n,C=l,O=Y,aa=I,A=W;b&&(a?(M=m,J=o,M&&(r=p),J&&(q=W),M||J?(D=l,v=n):v=D=0,R=B,V=X):(L=E,K=G,L&&(u=p),K&&(A=W),L||K?(C=l,U=n):U=C=0,O=Y,aa=I));a?(M=m,J=o):
(L=E,K=G);1==l&&!a&&(N=C-l+1,G&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+W+"px;top:"+(z+1-N)+"px;width:"+I+"px;height:"+N+"px;background-color:"+s+'"></DIV>'),E&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+p+"px;top:"+(z+1-N)+"px;width:"+Y+"px;height:"+N+"px;background-color:"+s+'"></DIV>'));0==l&&a&&(N=D-l+1,o&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+W+"px;top:"+w+"px;width:"+X+"px;height:"+N+"px;background-color:"+s+'"></DIV>'),
m&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+p+"px;top:"+w+"px;width:"+B+"px;height:"+N+"px;background-color:"+s+'"></DIV>'))}function f(a){var b,c,d=P,e=P,f=!1,g=!1;if(a){var i=!1,l=!1;b=w;c=xDataArraySa;xDataArray2=xDataArrayEa;saDvar=j;eaDvar=h}else{var n=!1,m=!1;b=z;xDataArray2=xDataArraySa;c=xDataArrayEa;saDvar=360-h;eaDvar=360-j}eaDvar>saDvar?null!=xDataArray2[b]&&p+P>=xDataArray2[b].xMin&&p<=xDataArray2[b].xMin?($=xDataArray2[b].xMin,null!=c[b]&&p+P>=c[b].xMax+1&&p<=
c[b].xMax+1?(F=c[b].xMax+1,d=F-$):d=p+P-$,p=$,f=!0):null!=c[b]&&p+P>=c[b].xMax+1&&p<=c[b].xMax+1?(F=c[b].xMax+1,d=F-p,f=!0):90<eaDvar&&90>saDvar&&(f=!0):(null!=c[b]&&p+P>=c[b].xMax+1&&p<=c[b].xMax+1?(F=c[b].xMax+1,d=F-p,f=!0):90>eaDvar&&90>saDvar&&(f=!0),null!=xDataArray2[b]&&p+P>=xDataArray2[b].xMin&&p<=xDataArray2[b].xMin?(W=xDataArray2[b].xMin,e=P-xDataArray2[b].xMin+p,g=!0):90<eaDvar&&90<saDvar&&(W=p,e=P,g=!0));a?(f&&(i=!0),g&&(l=!0),B=d,X=e):(f&&(n=!0),g&&(m=!0),Y=d,I=e);0<=j&&180>j&&0<=h&&180>
h&&j>h?n=!0:180<=j&&360>j&&180<=h&&360>h&&j>h&&(i=!0);null==W&&(W="X");null==p&&(p="X");a?(N=1,l&&"X"!=W&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+W+"px;top:"+w+"px;width:"+X+"px;height:"+N+"px;background-color:"+s+'"></DIV>'),i&&"X"!=p&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+p+"px;top:"+w+"px;width:"+B+"px;height:"+N+"px;background-color:"+s+'"></DIV>')):(N=1,m&&"X"!=W&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+W+"px;top:"+
(z+1-N)+"px;width:"+I+"px;height:"+N+"px;background-color:"+s+'"></DIV>'),n&&"X"!=p&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+p+"px;top:"+(z+1-N)+"px;width:"+Y+"px;height:"+N+"px;background-color:"+s+'"></DIV>'))}if(!i||!g||!e||!c||null==d||null==b)return!1;e*=G;c*=G;if(0!=b){var m=T.appendChild(document.createElement("div")),k=[];phCenter=E(g);var j;j=360<d?d%360:d;var g=360<b?b%360:b,h;h=parseFloat(j)+parseFloat(g);360<h&&(h%=360);"cartecian"==ba&&(j=360-j,h=360-h,g=j,
j=h,h=g);var o,g=j*Math.PI/180,b=h*Math.PI/180;45>=j&&0<=j||135<=j&&225>=j||315<=j&&360>=j?(d=Math.round(phCenter.y+Math.sin(g)*e/2),g=90<=j&&270>=j?Math.round(phCenter.x-e/2):Math.round(phCenter.x+e/2)):(g=Math.round(phCenter.x+Math.cos(g)*c/2),d=0<=j&&180>=j?Math.round(phCenter.y+c/2):Math.round(phCenter.y-c/2));45>=h&&0<=h||135<=h&&225>=h||315<=h&&360>=h?(o=Math.round(phCenter.y+Math.sin(b)*e/2),b=90<=h&&270>=h?Math.round(phCenter.x-e/2):Math.round(phCenter.x+e/2)):(b=Math.round(phCenter.x+Math.cos(b)*
c/2),o=0<=h&&180>=h?Math.round(phCenter.y+c/2):Math.round(phCenter.y-c/2));xDataArraySa=S(phCenter,new jsPoint(g,d));xDataArrayEa=S(phCenter,new jsPoint(b,o));for(var s=i.getHex(),e=Math.round(e/2),g=Math.round(c/2),c=phCenter.x,i=phCenter.y,n=0,l=g,e=e*e,g=g*g,p,r,u,W,q,A,w,z,F,$,v,U,D,C,P,B,Y,X,I,R,O,V,aa,N,M,L,J,K,d=l;g*n<e*l;)n++,0<=g*n*n+e*(l-0.5)*(l-0.5)-e*g&&l--,1==n&&l!=d?(w=i+d-1,z=i-d,I=X=Y=B=P=1,p=c,0<=j&&180>j&&0<=h&&180>h?(f(!0),h<=j&&f(!1)):180<=j&&360>j&&180<=h&&360>=h?(f(!1),h<=j&&
f(!0)):(f(!0),f(!1))):l!=d&&(w=i+d,z=i-d,I=X=Y=B=P=2*(n-1)+1,p=c-n+1,0<=j&&180>j&&0<=h&&180>h?(f(!0),h<=j&&f(!1)):180<=j&&360>j&&180<=h&&360>=h?(f(!1),h<=j&&f(!0)):(f(!0),f(!1)),d=l),g*n>=e*l&&(w=i+d,z=i-d,I=X=Y=B=P=2*n+1,p=c-n,0<=j&&180>j&&0<=h&&180>h?(f(!0),h<=j&&f(!1)):180<=j&&360>j&&180<=h&&360>=h?(f(!1),h<=j&&f(!0)):(f(!0),f(!1)));d=l;N=1;w=i+l;z=i-l;I=X=Y=B=P=2*n+1;p=c-n;0<=j&&180>j&&0<=h&&180>h?(xDataArrayEa.pop(),a(!0,!0),h<=j&&a(!1,!0)):180<=j&&360>j&&180<=h&&360>=h?(xDataArrayEa.pop(),0!=
l&&a(!1,!0),h<=j&&a(!0,!0)):(180<=j&&360>j?xDataArraySa.pop():xDataArrayEa.pop(),a(!0,!0),0!=l&&(p=c-n,a(!1,!0)));for(;0!=l;)l--,0>=g*(n+0.5)*(n+0.5)+e*l*l-e*g&&n++,w=i+l,z=i-l,I=X=Y=B=P=2*n+1,p=c-n,0<=j&&180>j&&0<=h&&180>h?(a(!0),h<=j&&a(!1)):180<=j&&360>j&&180<=h&&360>=h?(0!=l&&a(!1),h<=j&&a(!0)):(a(!0),0!=l&&(p=c-n,a(!1)));m.innerHTML=k.join("");return m}};this.drawArc=function(i,g,e,c,d,b){function a(a,b){var c,d,e=M,f=M,g=!1,i=!1;if(a){var m=!1,o=!1;c=v;d=xDataArraySa;xDataArray2=xDataArrayEa;
saDvar=j;eaDvar=h}else{var w=!1,A=!1;c=U;xDataArray2=xDataArraySa;d=xDataArrayEa;saDvar=360-h;eaDvar=360-j}eaDvar>saDvar?null!=xDataArray2[c]&&q+M>=xDataArray2[c].xMin&&q<=xDataArray2[c].xMin?(O=xDataArray2[c].xMin,null!=d[c]&&q+M>=d[c].xMax+1&&q<=d[c].xMax+1?(B=d[c].xMax+1,e=B-O):e=q+M-O,q=O,g=!0):null!=d[c]&&q+M>=d[c].xMax+1&&q<=d[c].xMax+1?(B=d[c].xMax+1,e=B-q,g=!0):90<eaDvar&&90>saDvar&&(g=!0):(null!=d[c]&&q+M>=d[c].xMax+1&&q<=d[c].xMax+1?(B=d[c].xMax+1,e=B-q,g=!0):90>eaDvar&&90>saDvar&&(g=!0),
null!=xDataArray2[c]&&q+M>=xDataArray2[c].xMin&&q<=xDataArray2[c].xMin?(z=xDataArray2[c].xMin,f=M-xDataArray2[c].xMin+q,i=!0):90<eaDvar&&90<saDvar&&(z=q,f=M,i=!0));a?(g&&(m=!0),i&&(o=!0),L=e,K=f):(g&&(w=!0),i&&(A=!0),J=e,Q=f);0<=j&&180>j&&0<=h&&180>h&&j>h?w=!0:180<=j&&360>j&&180<=h&&360>h&&j>h&&(m=!0);m&&null!=u[v-l]&&null!=q&&(n+u[v-l]<=q+L?L>q+L-n-u[v-l]&&(I=n+u[v-l],ca=q+L-n-u[v-l]):I=null,q<=n-u[v-l]+1?L>n-u[v-l]-q+1&&(L=n-u[v-l]-q+1):L>=q+L-n-u[v-l]+1&&(q=null));o&&null!=u[v-l]&&null!=z&&(n+
u[v-l]<=z+K?K>z+K-n-u[v-l]&&(R=n+u[v-l],ea=z+K-n-u[v-l]):R=null,z<=n-u[v-l]+1?K>n-u[v-l]-z+1&&(K=n-u[v-l]-z+1):K>=z+K-n-u[v-l]+1&&(z=null));w&&null!=u[v-l]&&null!=q&&(n+u[v-l]<=q+J?J>q+J-n-u[v-l]&&(I=n+u[v-l],da=q+J-n-u[v-l]):I=null,q<=n-u[v-l]+1?J>n-u[v-l]-q+1&&(J=n-u[v-l]-q+1):J>=q+J-n-u[v-l]+1&&(q=null));A&&null!=u[v-l]&&null!=z&&(n+u[v-l]<=z+Q?Q>z+Q-n-u[v-l]&&(R=n+u[v-l],fa=z+Q-n-u[v-l]):R=null,z<=n-u[v-l]+1?Q>n-u[v-l]-z+1&&(Q=n-u[v-l]-z+1):Q>=z+Q-n-u[v-l]+1&&(z=null));null==z&&(z="");null==q&&
(q="");if(!b)if(a){if(p!=P||D!=q||Z!=I||F!=z||aa!=R||L!=la||K!=na||ca!=pa||ea!=ra)if(H=Y-r,ga&&(null!=F&&""!=F&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+F+"px;top:"+(v+1)+"px;width:"+na+"px;height:"+H+"px;background-color:"+s+'"></DIV>'),null!=aa&&""!=aa&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+aa+"px;top:"+(v+1)+"px;width:"+ra+"px;height:"+H+"px;background-color:"+s+'"></DIV>')),ha&&(null!=D&&""!=D&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+
D+"px;top:"+(v+1)+"px;width:"+la+"px;height:"+H+"px;background-color:"+s+'"></DIV>'),null!=Z&&""!=Z&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+Z+"px;top:"+(v+1)+"px;width:"+pa+"px;height:"+H+"px;background-color:"+s+'"></DIV>')),ha||ga)D=q,Z=I,ha=m,ga=o,P=p,Y=r,la=L,na=K,F=z,aa=R,pa=ca,ra=ea}else if(p!=V||C!=q||ka!=I||$!=z||J!=ma||da!=qa||Q!=oa||fa!=sa)if(H=X-r,ia&&(null!=$&&""!=$&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+$+"px;top:"+(U-H)+"px;width:"+
oa+"px;height:"+H+"px;background-color:"+s+'"></DIV>'),null!=N&&""!=N&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+N+"px;top:"+(U-H)+"px;width:"+sa+"px;height:"+H+"px;background-color:"+s+'"></DIV>')),ja&&(null!=C&&""!=C&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+C+"px;top:"+(U-H)+"px;width:"+ma+"px;height:"+H+"px;background-color:"+s+'"></DIV>'),null!=ka&&""!=ka&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+ka+"px;top:"+(U-H)+
"px;width:"+qa+"px;height:"+H+"px;background-color:"+s+'"></DIV>')),ja||ia)C=q,ka=I,ja=w,ia=A,V=p,X=r,ma=J,oa=Q,$=z,N=R,qa=da,sa=fa;b&&(a?(ha=m,ga=o,ha&&(D=q,Z=I),ga&&(F=z,aa=R),ha||ga?(Y=r,P=p):P=Y=0,la=L,na=K,pa=ca,ra=ea):(ja=w,ia=A,ja&&(C=q,ka=I),ia&&($=z,N=R),ja||ia?(X=r,V=p):V=X=0,ma=J,oa=Q,qa=da,sa=fa));a?(ha=m,ga=o):(ja=w,ia=A);1==r&&!a&&(H=X-r+1,A&&(""!=z&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+z+"px;top:"+(U+1-H)+"px;width:"+Q+"px;height:"+H+"px;background-color:"+
s+'"></DIV>'),null!=R&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+R+"px;top:"+(U+1-H)+"px;width:"+fa+"px;height:"+H+"px;background-color:"+s+'"></DIV>')),w&&(""!=q&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+q+"px;top:"+(U+1-H)+"px;width:"+J+"px;height:"+H+"px;background-color:"+s+'"></DIV>'),null!=I&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+I+"px;top:"+(U+1-H)+"px;width:"+da+"px;height:"+H+"px;background-color:"+s+'"></DIV>')));
0==r&&a&&(H=Y-r+1,o&&(""!=z&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+z+"px;top:"+v+"px;width:"+K+"px;height:"+H+"px;background-color:"+s+'"></DIV>'),null!=R&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+R+"px;top:"+v+"px;width:"+ea+"px;height:"+H+"px;background-color:"+s+'"></DIV>')),m&&(""!=q&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+q+"px;top:"+v+"px;width:"+L+"px;height:"+H+"px;background-color:"+s+'"></DIV>'),null!=I&&
(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+I+"px;top:"+v+"px;width:"+ca+"px;height:"+H+"px;background-color:"+s+'"></DIV>')))}function f(a){var b,c,d=M,e=M,f=!1,g=!1;if(a){var i=!1,m=!1;b=v;c=xDataArraySa;xDataArray2=xDataArrayEa;saDvar=j;eaDvar=h}else{var o=!1,p=!1;b=U;xDataArray2=xDataArraySa;c=xDataArrayEa;saDvar=360-h;eaDvar=360-j}eaDvar>saDvar?null!=xDataArray2[b]&&q+M>=xDataArray2[b].xMin&&q<=xDataArray2[b].xMin?(O=xDataArray2[b].xMin,c[b]&&q+M>=c[b].xMax+1&&q<=c[b].xMax+
1?(B=c[b].xMax+1,d=B-O):d=q+M-O,q=O,f=!0):null!=c[b]&&q+M>=c[b].xMax+1&&q<=c[b].xMax+1?(B=c[b].xMax+1,d=B-q,f=!0):90<eaDvar&&90>saDvar&&(f=!0):(null!=c[b]&&q+M>=c[b].xMax+1&&q<=c[b].xMax+1?(B=c[b].xMax+1,d=B-q,f=!0):90>eaDvar&&90>saDvar&&(f=!0),null!=xDataArray2[b]&&q+M>=xDataArray2[b].xMin&&q<=xDataArray2[b].xMin?(z=xDataArray2[b].xMin,e=M-xDataArray2[b].xMin+q,g=!0):90<eaDvar&&90<saDvar&&(z=q,e=M,g=!0));a?(f&&(i=!0),g&&(m=!0),L=d,K=e):(f&&(o=!0),g&&(p=!0),J=d,Q=e);0<=j&&180>j&&0<=h&&180>h&&j>h?
o=!0:180<=j&&360>j&&180<=h&&360>h&&j>h&&(i=!0);i&&u[v-l]&&null!=q&&(n+u[v-l]<=q+L?L>q+L-n-u[v-l]&&(I=n+u[v-l],ca=q+L-n-u[v-l]):I="X",q<n-u[v-l]+1?L>n-u[v-l]-q+1&&(L=n-u[v-l]-q+1):L>=q+L-n-u[v-l]+1&&(q="X"));m&&u[v-l]&&null!=z&&(n+u[v-l]<=z+K?K>z+K-n-u[v-l]&&(R=n+u[v-l],ea=z+K-n-u[v-l]):R="X",z<=n-u[v-l]+1?K>n-u[v-l]-z+1&&(K=n-u[v-l]-z+1):K>=z+K-n-u[v-l]+1&&(z="X"));o&&u[v-l]&&null!=q&&(n+u[v-l]<=q+J?J>q+J-n-w[v-l]&&(I=n+u[v-l],da=q+J-n-u[v-l]):I="X",q<=n-u[v-l]+1?J>n-u[v-l]-q+1&&(J=n-u[v-l]-q+1):
J>=q+J-n-u[v-l]+1&&(q="X"));p&&w[v-l]&&null!=z&&(n+u[v-l]<=z+Q?Q>z+Q-n-u[v-l]&&(R=n+u[v-l],fa=z+Q-n-u[v-l]):R="X",z<=n-u[v-l]+1?Q>n-u[v-l]-z+1&&(Q=n-u[v-l]-z+1):Q>=z+Q-n-u[v-l]+1&&(z="X"));null==z&&(z="X");null==q&&(q="X");null==R&&(R="X");null==I&&(I="X");a?(H=1,m&&("X"!=z&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+z+"px;top:"+v+"px;width:"+K+"px;height:"+H+"px;background-color:"+s+'"></DIV>'),"X"!=R&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+R+"px;top:"+
v+"px;width:"+ea+"px;height:"+H+"px;background-color:"+s+'"></DIV>')),i&&("X"!=q&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+q+"px;top:"+v+"px;width:"+L+"px;height:"+H+"px;background-color:"+s+'"></DIV>'),"X"!=I&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+I+"px;top:"+v+"px;width:"+ca+"px;height:"+H+"px;background-color:"+s+'"></DIV>'))):(H=1,p&&("X"!=z&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+z+"px;top:"+(U+1-H)+"px;width:"+
Q+"px;height:"+H+"px;background-color:"+s+'"></DIV>'),"X"!=R&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+R+"px;top:"+(U+1-H)+"px;width:"+fa+"px;height:"+H+"px;background-color:"+s+'"></DIV>')),o&&("X"!=q&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+q+"px;top:"+(U+1-H)+"px;width:"+J+"px;height:"+H+"px;background-color:"+s+'"></DIV>'),"X"!=I&&(k[k.length]='<DIV style="position:absolute;overflow:hidden;left:'+I+"px;top:"+(U+1-H)+"px;width:"+da+"px;height:"+
H+"px;background-color:"+s+'"></DIV>')))}if(!i||!g||!e||!c||null==d||null==b)return!1;e*=G;c*=G;if(0!=b){var m=T.appendChild(document.createElement("div")),k=[];phCenter=E(g);var j;j=360<d?d%360:d;var g=360<b?b%360:b,h;h=parseFloat(j)+parseFloat(g);360<h&&(h%=360);"cartecian"==ba&&(j=360-j,h=360-h,g=j,j=h,h=g);var o,g=j*Math.PI/180,b=h*Math.PI/180;45>=j&&0<=j||135<=j&&225>=j||315<=j&&360>=j?(d=Math.round(phCenter.y+Math.sin(g)*e/2),g=90<=j&&270>=j?Math.round(phCenter.x-e/2):Math.round(phCenter.x+
e/2)):(g=Math.round(phCenter.x+Math.cos(g)*c/2),d=0<=j&&180>=j?Math.round(phCenter.y+c/2):Math.round(phCenter.y-c/2));45>=h&&0<=h||135<=h&&225>=h||315<=h&&360>=h?(o=Math.round(phCenter.y+Math.sin(b)*e/2),b=90<=h&&270>=h?Math.round(phCenter.x-e/2):Math.round(phCenter.x+e/2)):(b=Math.round(phCenter.x+Math.cos(b)*c/2),o=0<=h&&180>=h?Math.round(phCenter.y+c/2):Math.round(phCenter.y-c/2));xDataArraySa=S(phCenter,new jsPoint(g,d));xDataArrayEa=S(phCenter,new jsPoint(b,o));var s=i.color.getHex(),g=Math.round(e/
2),d=Math.round(c/2),n=phCenter.x,l=phCenter.y,p=0,r=d,c=g*g,e=d*d,s=i.color.getHex(),g=g-parseInt(i.width)+1,i=d-parseInt(i.width)+1,i=A(phCenter,2*g,2*i),u=i[0],w=i[1];u.pop();w.pop();for(var q,D,C,z,F,$,v,U,B,O,P,V,Y,X,I,R,Z,ka,aa,N,M,L,J,K,Q,la,ma,na,oa,H,ca,da,ea,fa,pa,qa,ra,sa,ha,ja,ga,ia,i=r;e*p<c*r;)p++,0<=e*p*p+c*(r-0.5)*(r-0.5)-c*e&&r--,1==p&&r!=i?(v=l+i-1,U=l-i,Q=K=J=L=M=1,q=n,0<=j&&180>j&&0<=h&&180>h?(f(!0),h<=j&&f(!1)):180<=j&&360>j&&180<=h&&360>=h?(f(!1),h<=j&&f(!0)):(f(!0),f(!1))):
r!=i&&(v=l+i,U=l-i,Q=K=J=L=M=2*(p-1)+1,q=n-p+1,0<=j&&180>j&&0<=h&&180>h?(f(!0),h<=j&&f(!1)):180<=j&&360>j&&180<=h&&360>=h?(f(!1),h<=j&&f(!0)):(f(!0),f(!1)),i=r),e*p>=c*r&&(v=l+i,U=l-i,Q=K=J=L=M=2*p+1,q=n-p,0<=j&&180>j&&0<=h&&180>h?(f(!0),h<=j&&f(!1)):180<=j&&360>j&&180<=h&&360>=h?(f(!1),h<=j&&f(!0)):(f(!0),f(!1)));i=r;H=1;v=l+r;U=l-r;Q=K=J=L=M=2*p+1;q=n-p;0<=j&&180>j&&0<=h&&180>h?(xDataArrayEa.pop(),a(!0,!0),h<=j&&a(!1,!0)):180<=j&&360>j&&180<=h&&360>=h?(xDataArrayEa.pop(),0!=r&&a(!1,!0),h<=j&&a(!0,
!0)):(180<=j&&360>j?xDataArraySa.pop():xDataArrayEa.pop(),a(!0,!0),0!=r&&(q=n-p,a(!1,!0)));for(;0!=r;)r--,0>=e*(p+0.5)*(p+0.5)+c*r*r-c*e&&p++,v=l+r,U=l-r,Q=K=J=L=M=2*p+1,q=n-p,0<=j&&180>j&&0<=h&&180>h?(a(!0),h<=j&&a(!1)):180<=j&&360>j&&180<=h&&360>=h?(0!=r&&a(!1),h<=j&&a(!0)):(a(!0),0!=r&&(q=n-p,a(!1)));m.innerHTML=k.join("");return m}};this.drawPolyline=function(i,g){if(!i||!g)return!1;for(var e=T.appendChild(document.createElement("div")),c=1;c<g.length;c++)e.appendChild(this.drawLine(i,g[c-1],
g[c]));return e};this.drawPolygon=function(i,g){if(!i||!g)return!1;var e=T.appendChild(document.createElement("div")),c;for(c=1;c<g.length;c++)e.appendChild(this.drawLine(i,g[c-1],g[c]));e.appendChild(this.drawLine(i,g[c-1],g[0]))};this.fillPolygon=function(i,g){function e(a,b){return a.xMin-b.xMin}if(!i||!g)return!1;var c=[],d;for(d=0;d<g.length;d++)c[d]=E(g[d]);var b=T.appendChild(document.createElement("div")),a=[],f=i.getHex(),m=[],k=c[0].y,j=c[0].y,h=[],o,s,n,l;l=c.length;for(d=0;d<c.length;d++)s=
0!=d?d-1:l-1,c[s].x==c[d].x&&c[s].y==c[d].y||(h[h.length]=c[d]);c=h;h=[];l=c.length;for(d=0;d<c.length;d++)s=0!=d?d-1:l-1,n=d!=l-1?d+1:0,c[d].y==c[n].y&&c[d].y==c[s].y?(c[s].x<=c[d].x?(a[a.length]='<DIV style="position:absolute;height:1px;overflow:hidden;left:',a[a.length]=c[s].x,a[a.length]="px;top:",a[a.length]=c[d].y,a[a.length]="px;width:",a[a.length]=c[d].x-c[s].x):(a[a.length]='<DIV style="position:absolute;height:1px;overflow:hidden;left:',a[a.length]=c[d].x,a[a.length]="px;top:",a[a.length]=
c[d].y,a[a.length]="px;width:",a[a.length]=c[s].x-c[d].x),a[a.length]="px;background-color:",a[a.length]=f,a[a.length]='"></DIV>'):h[h.length]=c[d];c=h;for(d=1;d<c.length;d++)if(k>c[d-1].y&&(k=c[d-1].y),j<c[d-1].y&&(j=c[d-1].y),m[d-1]=S(c[d-1],c[d]),d<c.length-1){if(c[d-1].y<c[d].y&&c[d].y<c[d+1].y||c[d-1].y>c[d].y&&c[d].y>c[d+1].y)m[d-1][c[d].y]=null}else if(c[d-1].y<c[d].y&&c[d].y<c[0].y||c[d-1].y>c[d].y&&c[d].y>c[0].y)m[d-1][c[d].y]=null;k>c[d-1].y&&(k=c[d-1].y);j<c[d-1].y&&(j=c[d-1].y);m[d-1]=
S(c[d-1],c[0]);if(c[d-1].y<c[0].y&&c[0].y<c[1].y||c[d-1].y>c[0].y&&c[0].y>c[1].y)m[d-1][c[0].y]=null;var p;l=c.length;for(var r;k<=j;k++){p=0;h=[];for(d=0;d<l;d++){r=m[d];s=0!=d?d-1:l-1;o=1!=d&&0!=d?d-2:0==d?l-2:l-1;n=d!=l-1?d+1:0;if(k==c[d].y&&k==c[s].y&&k<c[o].y&&k<c[n].y&&r[k]||k==c[d].y&&k==c[s].y&&k>c[o].y&&k>c[n].y&&r[k])h[p]=r[k],p++;r[k]&&(h[p]=r[k],p++)}h.sort(e);n=k;for(d=0;d<h.length;d+=2)h[d+1]?(s=h[d].xMin,o=h[d+1].xMax>h[d].xMax?h[d+1].xMax-h[d].xMin+1:h[d].xMax-h[d].xMin+1):(s=h[h.length-
1].xMin,o=h[h.length-1].xMax-h[h.length-1].xMin+1),a[a.length]='<DIV style="position:absolute;height:1px;overflow:hidden;left:',a[a.length]=s,a[a.length]="px;top:",a[a.length]=n,a[a.length]="px;width:",a[a.length]=o,a[a.length]="px;background-color:",a[a.length]=f,a[a.length]='"></DIV>'}b.innerHTML=a.join("");return b};this.drawBezier=function(i,g){if(!i||!g)return!1;var e=[],c;for(c=0;c<g.length;c++)e[c]=E(g[c]);if(4<e.length)e=[e[0],e[1],e[2],e[3]];else if(4>e.length)return!1;var d=T.appendChild(document.createElement("div")),
b=[],a=e[0].x,f=e[0].x;for(c=1;c<e.length;c++)a>e[c-1].x&&(a=e[c-1].x),f<e[c-1].x&&(f=e[c-1].x);var m,k,j,h,o,s,n;c=e[0].x;h=e[0].y;m=e[1].x;o=e[1].y;k=e[2].x;s=e[2].y;j=e[3].x;n=e[3].y;var l,p=c-1,r=h-1,u;l=0;var w=1,q=parseInt(i.width),A=i.color.getHex(),f=c;u=h;var D=!1,z=!1,F=[],B,v,C,G;v=B=u;for(G=C=f;1>=l;)e=(1-l)*(1-l)*(1-l)*c+3*(1-l)*(1-l)*l*m+3*(1-l)*l*l*k+l*l*l*j,a=(1-l)*(1-l)*(1-l)*h+3*(1-l)*(1-l)*l*o+3*(1-l)*l*l*s+l*l*l*n,e=Math.round(e),a=Math.round(a),e!=p||a!=r?1<e-p||1<a-r||1<p-e||
1<r-a?(l-=w,w/=1.1):(F[F.length]=new jsPoint(e,a),p=e,r=a):(l-=w,w*=1.1),l+=w;m=[];for(c=0;c<F.length;c++)k=!1,e=F[c].x,a=F[c].y,0!=c&&c+1<F.length&&1==Math.abs(F[c-1].x-F[c+1].x)&&1==Math.abs(F[c-1].y-F[c+1].y)&&!m[c-1]&&(k=!0,m[c]=!0),k||(a==u&&!z&&(D=!0),e==f&&!D&&(z=!0),e!=f&&!D&&(v==B?(b[b.length]='<DIV style="position:absolute;overflow:hidden;left:',b[b.length]=f,b[b.length]="px;top:",b[b.length]=B,b[b.length]="px;width:",b[b.length]=q,b[b.length]="px;height:",b[b.length]=q):(b[b.length]='<DIV style="position:absolute;overflow:hidden;left:',
b[b.length]=f,b[b.length]="px;top:",b[b.length]=B,b[b.length]="px;width:",b[b.length]=q,b[b.length]="px;height:",b[b.length]=v-B+q),b[b.length]="px;background-color:",b[b.length]=A,b[b.length]='"></DIV>',f=e,v=B=u=a,z=!1),a!=u&&!z&&(G==C?(b[b.length]='<DIV style="position:absolute;overflow:hidden;left:',b[b.length]=C,b[b.length]="px;top:",b[b.length]=u,b[b.length]="px;width:",b[b.length]=q):(b[b.length]='<DIV style="position:absolute;overflow:hidden;left:',b[b.length]=C,b[b.length]="px;top:",b[b.length]=
u,b[b.length]="px;width:",b[b.length]=G-C+q),b[b.length]="px;height:",b[b.length]=q,b[b.length]="px;background-color:",b[b.length]=A,b[b.length]='"></DIV>',f=e,u=a,G=C=f,D=!1),z&&!D?(a<=B&&(B=a),a>v&&(v=a)):v=B=a,D&&!z?(e<=C&&(C=e),e>G&&(G=e)):G=C=e,c==F.length-1&&(z||(G==C?(b[b.length]='<DIV style="position:absolute;overflow:hidden;left:',b[b.length]=C,b[b.length]="px;top:",b[b.length]=u,b[b.length]="px;width:",b[b.length]=q):(b[b.length]='<DIV style="position:absolute;overflow:hidden;left:',b[b.length]=
C,b[b.length]="px;top:",b[b.length]=u,b[b.length]="px;width:",b[b.length]=G-C+q),b[b.length]="px;height:",b[b.length]=q,b[b.length]="px;background-color:",b[b.length]=A,b[b.length]='"></DIV>'),D||(v==B?(b[b.length]='<DIV style="position:absolute;overflow:hidden;left:',b[b.length]=f,b[b.length]="px;top:",b[b.length]=B,b[b.length]="px;width:",b[b.length]=q,b[b.length]="px;height:",b[b.length]=q):(b[b.length]='<DIV style="position:absolute;overflow:hidden;left:',b[b.length]=f,b[b.length]="px;top:",b[b.length]=
B,b[b.length]="px;width:",b[b.length]=G-C+q,b[b.length]="px;height:",b[b.length]=v-B+q),b[b.length]="px;background-color:",b[b.length]=A,b[b.length]='"></DIV>')));d.innerHTML=b.join("");return d};this.drawPolyBezier=function(i,g){function e(a){for(var b=1,c=1;c<=a;c++)b*=c;return b}if(!i||!g||2>g.length)return!1;for(var c=[],d=0;d<g.length;d++)c[d]=E(g[d]);for(var b=T.appendChild(document.createElement("div")),a=[],f=[],m=[],k=c.length-1,d=0;d<=k;d++)f[d]=c[d].x*e(k)/(e(d)*e(k-d)),m[d]=c[d].y*e(k)/
(e(d)*e(k-d));var j=c[0].x-1,h=c[0].y-1,o;t=0;var s=1,n=parseInt(i.width),l=i.color.getHex();o=c[0].x;var c=c[0].y,p=!1,r=!1,u=0,w,q,A=[],B,z,F,C;z=B=c;for(C=F=o;1>=t;){for(d=q=w=0;d<=k;d++)u=Math.pow(1-t,k-d)*Math.pow(t,d),w+=f[d]*u,q+=m[d]*u;w=Math.round(w);q=Math.round(q);w!=j||q!=h?1<w-j||1<q-h||1<j-w||1<h-q?(t-=s,s/=1.1):(A[A.length]=new jsPoint(w,q),j=w,h=q):(t-=s,s*=1.1);t+=s}f=[];for(d=0;d<A.length;d++)m=!1,w=A[d].x,q=A[d].y,0!=d&&d+1<A.length&&1==Math.abs(A[d-1].x-A[d+1].x)&&1==Math.abs(A[d-
1].y-A[d+1].y)&&!f[d-1]&&(m=!0,f[d]=!0),m||(q==c&&!r&&(p=!0),w==o&&!p&&(r=!0),w!=o&&!p&&(z==B?(a[a.length]='<DIV style="position:absolute;overflow:hidden;left:',a[a.length]=o,a[a.length]="px;top:",a[a.length]=B,a[a.length]="px;width:",a[a.length]=n,a[a.length]="px;height:",a[a.length]=n):(a[a.length]='<DIV style="position:absolute;overflow:hidden;left:',a[a.length]=o,a[a.length]="px;top:",a[a.length]=B,a[a.length]="px;width:",a[a.length]=n,a[a.length]="px;height:",a[a.length]=z-B+n),a[a.length]="px;background-color:",
a[a.length]=l,a[a.length]='"></DIV>',o=w,z=B=c=q,r=!1),q!=c&&!r&&(C==F?(a[a.length]='<DIV style="position:absolute;overflow:hidden;left:',a[a.length]=F,a[a.length]="px;top:",a[a.length]=c,a[a.length]="px;width:",a[a.length]=n):(a[a.length]='<DIV style="position:absolute;overflow:hidden;left:',a[a.length]=F,a[a.length]="px;top:",a[a.length]=c,a[a.length]="px;width:",a[a.length]=C-F+n),a[a.length]="px;height:",a[a.length]=n,a[a.length]="px;background-color:",a[a.length]=l,a[a.length]='"></DIV>',o=w,
c=q,C=F=o,p=!1),r&&!p?(q<=B&&(B=q),q>z&&(z=q)):z=B=q,p&&!r?(w<=F&&(F=w),w>C&&(C=w)):C=F=w,d==A.length-1&&(r||(C==F?(a[a.length]='<DIV style="position:absolute;overflow:hidden;left:',a[a.length]=F,a[a.length]="px;top:",a[a.length]=c,a[a.length]="px;width:",a[a.length]=n):(a[a.length]='<DIV style="position:absolute;overflow:hidden;left:',a[a.length]=F,a[a.length]="px;top:",a[a.length]=c,a[a.length]="px;width:",a[a.length]=C-F+n),a[a.length]="px;height:",a[a.length]=n,a[a.length]="px;background-color:",
a[a.length]=l,a[a.length]='"></DIV>'),p||(z==B?(a[a.length]='<DIV style="position:absolute;overflow:hidden;left:',a[a.length]=o,a[a.length]="px;top:",a[a.length]=B,a[a.length]="px;width:",a[a.length]=n,a[a.length]="px;height:",a[a.length]=n):(a[a.length]='<DIV style="position:absolute;overflow:hidden;left:',a[a.length]=o,a[a.length]="px;top:",a[a.length]=B,a[a.length]="px;width:",a[a.length]=C-F+n,a[a.length]="px;height:",a[a.length]=z-B+n),a[a.length]="px;background-color:",a[a.length]=l,a[a.length]=
'"></DIV>')));b.innerHTML=a.join("");return b};this.drawCurve=function(i,g,e,c){if(!i||!g)return!1;e||(e=0);c||(c=!1);for(var d=[],b=0;b<g.length;b++)d[b]=E(g[b]);g=[];if(!c||!(d[0].x==d[d.length-1].x&&d[0].y==d[d.length-1].y))g[g.length]=d[0];for(b=1;b<d.length;b++)d[b].x==d[b-1].x&&d[b].y==d[b-1].y||(g[g.length]=d[b]);d=g;if(2>d.length)return!1;if(2==d.length)return this.drawLine(i,d[0],d[1],"physical");var g=T.appendChild(document.createElement("div")),a=[],f=[],m=d.length-1;if(c){for(b=0;b<=m-
1;b++)0==b?V([d[m],d[0],d[1],d[2]],e,f):b==m-1?V([d[m-2],d[m-1],d[m],d[0]],e,f):V([d[b-1],d[b],d[b+1],d[b+2]],e,f);V([d[m-1],d[m],d[0],d[1]],e,f)}else for(b=0;b<=m-1;b++)0==b?V([d[0],d[0],d[1],d[2]],e,f):b==m-1?V([d[m-2],d[m-1],d[m],d[m]],e,f):V([d[b-1],d[b],d[b+1],d[b+2]],e,f);var e=f[0].x,c=f[0].y,b=d=!1,k,j,h;k=m=e;h=j=c;for(var o=parseInt(i.width),i=i.color.getHex(),s=[],n=0;n<f.length;n++){var l=!1;x=f[n].x;y=f[n].y;0!=n&&n+1<f.length&&1==Math.abs(f[n-1].x-f[n+1].x)&&1==Math.abs(f[n-1].y-f[n+
1].y)&&!s[n-1]&&(l=!0,s[n]=!0);l||(y==c&&!b&&(d=!0),x==e&&!d&&(b=!0),x!=e&&!d&&(h==j?(a[a.length]='<DIV style="position:absolute;overflow:hidden;left:',a[a.length]=e,a[a.length]="px;top:",a[a.length]=j,a[a.length]="px;width:",a[a.length]=o,a[a.length]="px;height:",a[a.length]=o):(a[a.length]='<DIV style="position:absolute;overflow:hidden;left:',a[a.length]=e,a[a.length]="px;top:",a[a.length]=j,a[a.length]="px;width:",a[a.length]=o,a[a.length]="px;height:",a[a.length]=h-j+o),a[a.length]="px;background-color:",
a[a.length]=i,a[a.length]='"></DIV>',e=x,h=j=c=y,b=!1),y!=c&&!b&&(k==m?(a[a.length]='<DIV style="position:absolute;overflow:hidden;left:',a[a.length]=m,a[a.length]="px;top:",a[a.length]=c,a[a.length]="px;width:",a[a.length]=o):(a[a.length]='<DIV style="position:absolute;overflow:hidden;left:',a[a.length]=m,a[a.length]="px;top:",a[a.length]=c,a[a.length]="px;width:",a[a.length]=k-m+o),a[a.length]="px;height:",a[a.length]=o,a[a.length]="px;background-color:",a[a.length]=i,a[a.length]='"></DIV>',e=x,
c=y,k=m=e,d=!1),b&&!d?(y<=j&&(j=y),y>h&&(h=y)):h=j=y,d&&!b?(x<=m&&(m=x),x>k&&(k=x)):k=m=x,n==f.length-1&&(b||(k==m?(a[a.length]='<DIV style="position:absolute;overflow:hidden;left:',a[a.length]=m,a[a.length]="px;top:",a[a.length]=c,a[a.length]="px;width:",a[a.length]=o):(a[a.length]='<DIV style="position:absolute;overflow:hidden;left:',a[a.length]=m,a[a.length]="px;top:",a[a.length]=c,a[a.length]="px;width:",a[a.length]=k-m+o),a[a.length]="px;height:",a[a.length]=o,a[a.length]="px;background-color:",
a[a.length]=i,a[a.length]='"></DIV>'),d||(h==j?(a[a.length]='<DIV style="position:absolute;overflow:hidden;left:',a[a.length]=e,a[a.length]="px;top:",a[a.length]=j,a[a.length]="px;width:",a[a.length]=o,a[a.length]="px;height:",a[a.length]=o):(a[a.length]='<DIV style="position:absolute;overflow:hidden;left:',a[a.length]=e,a[a.length]="px;top:",a[a.length]=j,a[a.length]="px;width:",a[a.length]=k-m+o,a[a.length]="px;height:",a[a.length]=h-j+o),a[a.length]="px;background-color:",a[a.length]=i,a[a.length]=
'"></DIV>')))}g.innerHTML=a.join("");return g};this.drawClosedCurve=function(i,g,e){return this.drawCurve(i,g,e,!0)};this.fillClosedCurve=function(i,g,e){function c(a,b){return a.xMin-b.xMin}if(!i||!g)return!1;e||(e=0);for(var d=[],b=0;b<g.length;b++)d[b]=E(g[b]);g=[];d[0].x==d[d.length-1].x&&d[0].y==d[d.length-1].y||(g[g.length]=d[0]);for(b=1;b<d.length;b++)d[b].x==d[b-1].x&&d[b].y==d[b-1].y||(g[g.length]=d[b]);d=g;if(2>d.length)return!1;if(2==d.length)return this.drawLine(pen,d[0],d[1],"physical");
for(var g=T.appendChild(document.createElement("div")),a=[],i=i.getHex(),f=[],m=[],k=d.length-1,b=0;b<=k-1;b++)0==b?O([d[k],d[0],d[1],d[2]],e,m):b==k-1?O([d[k-2],d[k-1],d[k],d[0]],e,m):O([d[b-1],d[b],d[b+1],d[b+2]],e,m);O([d[k-1],d[k],d[0],d[1]],e,m);for(var e=ta(f,[],m),b=e[0],e=e[1],j,d=b;d<=e;d++){var h=f[d];h.sort(c);k=d;for(b=0;b<h.length;b+=2)h[b+1]?(m=h[b].xMin,j=h[b+1].xMax>h[b].xMax?h[b+1].xMax-h[b].xMin+1:h[b].xMax-h[b].xMin+1):(m=h[h.length-1].xMin,j=h[h.length-1].xMax-h[h.length-1].xMin+
1),a[a.length]='<DIV style="position:absolute;height:1px;overflow:hidden;left:',a[a.length]=m,a[a.length]="px;top:",a[a.length]=k,a[a.length]="px;width:",a[a.length]=j,a[a.length]="px;background-color:",a[a.length]=i,a[a.length]='"></DIV>'}g.innerHTML=a.join("");return g};this.drawText=function(i,g,e,c,d,b){if(!i||!g)return!1;phPoint=E(g);null!=d&&(d=Math.round(d*G)+"px");g=T.appendChild(document.createElement("div"));g.style.position="absolute";g.style.left=phPoint.x+"px";g.style.top=phPoint.y+"px";
c&&(g.style.color=c.getHex());e&&(e.family&&(g.style.fontFamily=e.family),e.weight&&(g.style.fontWeight=e.weight),e.size&&(g.style.fontSize=e.size),e.style&&(g.style.fontStyle=e.style),e.variant&&(g.style.fontVariant=e.variant));d&&(g.style.width=d);b&&(g.style.textAlign=b);g.innerHTML=i;return g};this.drawImage=function(i,g,e,c){if(!i||!g)return!1;phPoint=E(g);null!=e&&(e=Math.round(e*G)+"px");null!=c&&(c=Math.round(c*G)+"px");g=T.appendChild(document.createElement("div"));g.style.position="absolute";
g.style.left=phPoint.x+"px";g.style.top=phPoint.y+"px";var d=g.appendChild(document.createElement("img"));d.src=i;null!=e&&(d.style.width=e,g.style.width=e);null!=c&&(d.style.height=c,g.style.height=c);return g};this.clear=function(){T.innerHTML=""};this.showGrid=function(i,g,e){function c(a,b,c,d,e){var f=document.createElement("div");f.style.position="absolute";f.style.left=b.x+"px";f.style.top=b.y+"px";f.style.color=d.getHex();f.style.zIndex=-98;f.style.visibility="hidden";D.appendChild(f);c.family&&
(f.style.fontFamily=c.family);c.weight&&(f.style.fontWeight=c.weight);c.size&&(f.style.fontSize=c.size);c.style&&(f.style.fontStyle=c.style);c.variant&&(f.style.fontVariant=c.variant);e&&(f.align=e);f.innerHTML=a;return f}null==g&&(g=!0);var d,b,a,f,m=!1,k=!1;D.innerHTML="";e||(e=new jsColor(200,200,200));var i=i?i*G:Math.round(parseInt(D.style.width)/10),j=e.getHex();if(!(0>=parseInt(D.style.width)||0>=parseInt(D.style.height))){D.style.display="";d=parseInt(D.style.left);b=parseInt(D.style.left)+
parseInt(D.style.width);a=parseInt(D.style.top);f=parseInt(D.style.top)+parseInt(D.style.height);w.x-parseInt(D.style.left)<=parseInt(D.style.left)+D.offsetWidth-w.x&&(m=!0);w.y-parseInt(D.style.top)<=parseInt(D.style.top)+D.offsetHeight-w.y&&(k=!0);var h=[],o=new jsFont("arial",null,"9px"),e=e.getDarkerShade(150),s=e.getHex();h[h.length]='<DIV style="position:absolute;overflow:hidden;z-index:-100;left:'+d+"px;top:"+a+"px;width:"+(b-d+1)+"px;height:1px;background-color:"+j+'"></DIV>';h[h.length]=
'<DIV style="position:absolute;overflow:hidden;z-index:-100;left:'+d+"px;top:"+f+"px;width:"+(b-d+1)+"px;height:1px;background-color:"+j+'"></DIV>';h[h.length]='<DIV style="position:absolute;overflow:hidden;z-index:-100;left:'+d+"px;top:"+a+"px;width:1px;height:"+(f-a+1)+"px;background-color:"+j+'"></DIV>';h[h.length]='<DIV style="position:absolute;overflow:hidden;z-index:-100;left:'+b+"px;top:"+a+"px;width:1px;height:"+(f-a+1)+"px;background-color:"+j+'"></DIV>';for(var n=D.offsetHeight,l=D.offsetWidth,
p,r,u=(w.x-d)%i;u<b;u+=i)u==w.x&&u>=d?u>=d&&u<=b&&(h[h.length]='<DIV style="position:absolute;overflow:hidden;z-index:-99;left:'+u+"px;top:"+a+"px;width:1px;height:"+n+"px;background-color:"+s+'"></DIV>'):h[h.length]='<DIV style="position:absolute;overflow:hidden;z-index:-100;left:'+u+"px;top:"+a+"px;width:1px;height:"+n+"px;background-color:"+j+'"></DIV>',g&&u>=d&&u<b&&(p&&p.offsetLeft+p.offsetWidth+1<u?p.offsetWidth<b-u&&(r=c(Math.round((u-w.x)/G),new jsPoint(u+2,a+1+w.y),o,e)):p||(r=c(Math.round((u-
w.x)/G),new jsPoint(u+2,a+1+w.y),o,e)),r&&(k?(parseInt(r.style.top)-r.offsetHeight-1>a&&(r.style.top=parseInt(r.style.top)-r.offsetHeight-1),parseInt(r.style.top)<=a&&(r.style.top=a+1)):parseInt(r.style.top)+r.offsetHeight>f&&(r.style.top=f-r.offsetHeight-1),r.style.visibility="visible",p=r),r=null);p=null;for(n=(w.y-a)%i;n<=f;n+=i)n==w.y?n>=a&&n<=f&&(h[h.length]='<DIV style="position:absolute;overflow:hidden;z-index:-99;left:'+d+"px;top:"+n+"px;width:"+l+"px;height:1px;background-color:"+s+'"></DIV>'):
h[h.length]='<DIV style="position:absolute;overflow:hidden;z-index:-100;left:'+d+"px;top:"+n+"px;width:"+l+"px;height:1px;background-color:"+j+'"></DIV>',g&&n!=w.y&&n>=a&&n<f&&(p&&p.offsetTop+p.offsetHeight<n?p.offsetHeight<=f-n&&(r="cartecian"==ba?c(Math.round((w.y-n)/G),new jsPoint(d+2+w.x,n),o,e):c(Math.round((n-w.y)/G),new jsPoint(d+2+w.x,n),o,e)):p||(r="cartecian"==ba?c(Math.round((w.y-n)/G),new jsPoint(d+2+w.x,n),o,e):c(Math.round((n-w.y)/G),new jsPoint(d+2+w.x,n),o,e)),r&&(m?(r.style.left=
parseInt(r.style.left)-r.offsetWidth-2>d?parseInt(r.style.left)-r.offsetWidth-2:parseInt(r.style.left)+1,parseInt(r.style.left)<=d&&(r.style.left=d+1)):r.style.left=parseInt(r.style.left)+1+r.offsetWidth<b?parseInt(r.style.left)+1:b-r.offsetWidth-3,r.style.visibility="visible",k&&parseInt(r.style.top)+r.offsetHeight>w.y-r.offsetHeight&&parseInt(r.style.top)<w.y&&(r.style.visibility="hidden"),k&&parseInt(r.style.top)>w.y&&parseInt(r.style.top)<w.y+r.offsetHeight&&parseInt(r.style.top)>w.y&&(r.style.visibility=
"hidden"),w.y>f&&parseInt(r.style.top)+r.offsetHeight>f-r.offsetHeight&&(r.style.visibility="hidden"),!k&&parseInt(r.style.top)<w.y+r.offsetHeight&&parseInt(r.style.top)>w.y&&(r.style.visibility="hidden"),!k&&parseInt(r.style.top)<w.y&&parseInt(r.style.top)+r.offsetHeight>w.y&&parseInt(r.style.top)<w.y&&(alert(parseInt(r.style.top)),r.style.visibility="hidden"),w.y<a&&parseInt(r.style.top)<a+r.offsetHeight&&(r.style.visibility="hidden"),p=r),r=null);D.innerHTML+=h.join("")}};this.hideGrid=function(){D.innerHTML=
"";D.style.display="none"};this.setOrigin=function(i){w=i};this.getOrigin=function(){return w};this.setScale=function(i){G=i};this.getScale=function(){return G};this.setCoordinateSystem=function(i){i=i.toLowerCase();ba="default"!=i.toLowerCase()&&"cartecian"!=i.toLowerCase()?"default":i};this.getCoordinateSystem=function(){return ba=name};this.logicalToPhysicalPoint=E;D=document.createElement("div");D.style.left="0px";D.style.top="0px";0<T.clientWidth&&0<T.clientHeight?(D.style.width=parseInt(T.clientWidth)-
1+"px",D.style.height=parseInt(T.clientHeight)-1+"px"):(D.style.width="0px",D.style.height="0px");D.style.zIndex=0;D.style.position="absolute";D.style.display="none";T.appendChild(D)};