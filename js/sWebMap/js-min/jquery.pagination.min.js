(function(c){c.PaginationCalculator=function(a,b){this.maxentries=a;this.opts=b};c.extend(c.PaginationCalculator.prototype,{numPages:function(){return Math.ceil(this.maxentries/this.opts.items_per_page)},getInterval:function(a){var b=Math.floor(this.opts.num_display_entries/2),d=this.numPages(),e=d-this.opts.num_display_entries,e=a>b?Math.max(Math.min(a-b,e),0):0,a=a>b?Math.min(a+b+this.opts.num_display_entries%2,d):Math.min(this.opts.num_display_entries,d);return{start:e,end:a}}});c.PaginationRenderers=
{};c.PaginationRenderers.defaultRenderer=function(a,b){this.maxentries=a;this.opts=b;this.pc=new c.PaginationCalculator(a,b)};c.extend(c.PaginationRenderers.defaultRenderer.prototype,{createLink:function(a,b,d){var e=this.pc.numPages(),a=0>a?0:a<e?a:e-1,d=c.extend({text:a+1,classes:""},d||{}),b=a==b?c("<span class='current'>"+d.text+"</span>"):c("<a>"+d.text+"</a>").attr("href",this.opts.link_to.replace(/__id__/,a));d.classes&&b.addClass(d.classes);b.data("page_id",a);return b},appendRange:function(a,
b,d,e,c){for(;d<e;d++)this.createLink(d,b,c).appendTo(a)},getLinks:function(a,b){var d,e=this.pc.getInterval(a),f=this.pc.numPages(),g=c("<div class='pagination'></div>");this.opts.prev_text&&(0<a||this.opts.prev_show_always)&&g.append(this.createLink(a-1,a,{text:this.opts.prev_text,classes:"prev"}));0<e.start&&0<this.opts.num_edge_entries&&(d=Math.min(this.opts.num_edge_entries,e.start),this.appendRange(g,a,0,d,{classes:"sp"}),this.opts.num_edge_entries<e.start&&this.opts.ellipse_text&&jQuery("<span>"+
this.opts.ellipse_text+"</span>").appendTo(g));this.appendRange(g,a,e.start,e.end);e.end<f&&0<this.opts.num_edge_entries&&(f-this.opts.num_edge_entries>e.end&&this.opts.ellipse_text&&jQuery("<span>"+this.opts.ellipse_text+"</span>").appendTo(g),d=Math.max(f-this.opts.num_edge_entries,e.end),this.appendRange(g,a,d,f,{classes:"ep"}));this.opts.next_text&&(a<f-1||this.opts.next_show_always)&&g.append(this.createLink(a+1,a,{text:this.opts.next_text,classes:"next"}));c("a",g).click(b);return g}});c.fn.pagination=
function(a,b){function d(a){var b=c(a.target).data("page_id");(b=e(b))||a.stopPropagation();return b}function e(a){f.data("current_page",a);h=g.getLinks(a,d);f.empty();h.appendTo(f);return b.callback(a,f)}var b=jQuery.extend({items_per_page:10,num_display_entries:11,current_page:0,num_edge_entries:0,link_to:"#",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,renderer:"defaultRenderer",callback:function(){return!1}},b||{}),f=this,g,h,i;i=b.current_page;
f.data("current_page",i);a=!a||0>a?1:a;b.items_per_page=!b.items_per_page||0>b.items_per_page?1:b.items_per_page;if(!c.PaginationRenderers[b.renderer])throw new ReferenceError("Pagination renderer '"+b.renderer+"' was not found in jQuery.PaginationRenderers object.");g=new c.PaginationRenderers[b.renderer](a,b);var j=(new c.PaginationCalculator(a,b)).numPages();f.bind("setPage",{numPages:j},function(a,b){if(0<=b&&b<a.data.numPages)return e(b),!1});f.bind("prevPage",function(){var a=c(this).data("current_page");
0<a&&e(a-1);return!1});f.bind("nextPage",{numPages:j},function(a){var b=c(this).data("current_page");b<a.data.numPages-1&&e(b+1);return!1});h=g.getLinks(i,d);f.empty();h.appendTo(f);b.callback(i,f)}})(jQuery);