var $p,pure=$p=function(b,c){var e=b,k=!1;"string"===typeof e?k=c||!1:e&&!e[0]&&!e.length&&(e=[e]);return $p.core(e,k)};
$p.core=function(b,c,e){function k(a){if("undefined"!==typeof console){console.log(a);debugger}throw"pure error: "+a;}function K(){var a=$p.plugins,f=function(){};f.prototype=a;f.prototype.compile=a.compile||L;f.prototype.render=a.render||M;f.prototype.autoRender=a.autoRender||N;f.prototype.find=a.find||O;f.prototype._compiler=x;f.prototype._error=k;return new f}function C(a){var f;if(!(f=a.outerHTML))f=document.createElement("div"),f.appendChild(a.cloneNode(!0)),f=f.innerHTML;return f}function y(a,
f){return function(b){return a(""+f.call(b.item||b.context,b))}}function O(a,f){"string"===typeof a&&(f=a,a=!1);return"undefined"!==typeof document.querySelectorAll?(a||document).querySelectorAll(f):k("You can test PURE standalone with: iPhone, FF3.5+, Safari4+ and IE8+\n\nTo run PURE on your browser, you need a JS library/framework with a CSS selector engine")}function D(a,f){return function(b){for(var d=[a[0]],c=a.length,g,j,i,h,e=1;e<c;e++){g=f[e].call(this,b);j=a[e];if(""===g&&(i=d[d.length-1],
-1<(h=i.search(/[^\s]+=\"?$/))))d[d.length-1]=i.substring(0,h),j=j.substr(1);d[d.length]=g;d[d.length]=j}return d.join("")}}function P(a){var f=a.match(/^(\w+)\s*<-\s*(\S+)?$/);null===f&&k('bad loop spec: "'+a+'"');"item"===f[1]&&k('"item<-..." is a reserved word for the current running iteration.\n\nPlease choose another name for your loop.');if(!f[2]||f[2]&&/context/i.test(f[2]))f[2]=function(a){return a.context};return{name:f[1],sel:f[2]}}function w(a){if("function"===typeof a)return a;var f=a.match(/^[a-zA-Z\$_\@][\w\$:-]*(\.[\w\$:-]*[^\.])*$/);
if(null===f){var b=!1,d=a,c=[],g=[],j=0,i;if(/\'|\"/.test(d.charAt(0))){if(/\'|\"/.test(d.charAt(d.length-1)))return i=d.substring(1,d.length-1),function(){return i}}else for(;null!==(f=d.match(/#\{([^{}]+)\}/));)b=!0,c[j++]=d.slice(0,f.index),g[j]=w(f[1]),d=d.slice(f.index+f[0].length,d.length);if(!b)return function(){return a};c[j]=d;return D(c,g)}f=a.split(".");return function(a){var b=a.context||a,d=a[f[0]],a=0;if(d&&d.item){a+=1;if("pos"===f[a])return d.pos;b=d.item}for(d=f.length;a<d&&b;a++)b=
b[f[a]];return!b&&0!==b?"":b}}function z(a,f,b){var d,c,g,j,i,h=[];if("string"===typeof f){if(d=f,(i=f.match(E))||k("bad selector syntax: "+f),c=i[1],g=i[2],j=i[3],i=i[4],"."===g||!g&&j?h[0]=a:h=e.find(a,g),!h||0===h.length)return k('The node "'+f+'" was not found in the template:\n'+C(a).replace(/\t/g,"  "))}else c=f.prepend,j=f.attr,i=f.append,h=[a];if(c||i)c&&i?k("append/prepend cannot take place at the same time"):b?k("no append/prepend/replace modifiers allowed for loop target"):i&&b&&k("cannot append with loop (sel: "+
d+")");var t,m,p,n,o;j?(p=/^style$/i.test(j),o=(n=/^class$/i.test(j))?"className":j,t=function(a,b){a.setAttribute(F+j,b);if(o in a&&!p)try{a[o]=""}catch(f){}1===a.nodeType&&(a.removeAttribute(j),n&&a.removeAttribute(o))},m=p||n?p?function(a){return a.style.cssText}:function(a){return a.className}:function(a){return a.getAttribute(j)},a=function(a){return a.replace(/\"/g,"&quot;")},c=c?function(a,b){t(a,b+m(a))}:i?function(a,b){t(a,m(a)+b)}:function(a,b){t(a,b)}):(c=b?function(a,b){var f=a.parentNode;
f&&(f.insertBefore(document.createTextNode(b),a.nextSibling),f.removeChild(a))}:c?function(a,b){a.insertBefore(document.createTextNode(b),a.firstChild)}:i?function(a,b){a.appendChild(document.createTextNode(b))}:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(b))},a=function(a){return a});return{attr:j,nodes:h,set:c,sel:d,quotefn:a}}function A(a,b){for(var c=G+b+":",d=0;d<a.nodes.length;d++)a.set(a.nodes[d],c)}function H(a,b,c,d,e){return function(g){var j=
b(g),i=g[a],h={items:j},t=0,m,p=[],n=function(a,b,f,d){var h=g.pos,e=g.item,i=g.items;g.pos=b.pos=a;g.item=b.item=j[a];g.items=j;"undefined"!==typeof d&&(g.length=d);"function"===typeof f&&!1===f.call(g.item,g)?t++:(p.push(c.call(g.item,g)),g.pos=h,g.item=e,g.items=i)};g[a]=h;if(B(j)){m=j.length||0;"function"===typeof d&&j.sort(d);for(var o=0;o<m;o++)n(o,h,e,m-t)}else for(m in j&&"undefined"!==typeof d&&k("sort is only available on arrays, not objects"),j)j.hasOwnProperty(m)&&n(m,h,e);"undefined"!==
typeof i?g[a]=i:delete g[a];return p.join("")}}function I(a,b,c,d){var e=!1,g,j,i,h;for(h in c)c.hasOwnProperty(h)&&("sort"===h?j=c.sort:"filter"===h?i=c.filter:(e&&k("cannot have more than one loop on a target"),g=h,e=!0));g||k("Error in the selector: "+b+"\nA directive action must be a string, a function or a loop(<-)");e=c[g];if("string"===typeof e||"function"===typeof e)return c={},c[g]={root:e},I(a,b,c,d);c=P(g);g=w(c.sel);a=z(a,b,!0);b=a.nodes;for(r=0;r<b.length;r++){h=b[r];var t=x(h,e);d[d.length]=
y(a.quotefn,H(c.name,g,t,j,i));a.nodes=[h];A(a,d.length-1)}return a}function x(a,b,c,d){var e=[],g,j,i,h,k,m,p,n,o,r=[];if(!(h=d))if(h=c){i=a.getElementsByTagName("*");m=[];h=[];d={};var l,s,u;for(g=-1,j=i.length;g<j;g++)if(n=-1<g?i[g]:a,1===n.nodeType&&""!==n.className){u=n.className.split(" ");for(k=0,p=u.length;k<p;k++){l=u[k];a:{s=n.tagName;var v=l.match(E);l={prepend:!!v[1],prop:v[2],attr:v[3]||Q[s],append:!!v[4],sel:l};var q=v=s=void 0,q=void 0;for(s=h.length-1;0<=s;s--)if(v=h[s],q=(q=v.l[0])&&
q[l.prop],"undefined"!==typeof q){l.prop=v.p+"."+l.prop;!0===d[l.prop]&&(q=q[0]);break}if("undefined"===typeof q&&(q=w(l.prop)(B(c)?c[0]:c),""===q)){l=!1;break a}B(q)?(h.push({l:q,p:l.prop}),d[l.prop]=!0,l.t="loop"):l.t="str"}if(!1!==l){s=/nodevalue/i.test(l.attr);if(-1<l.sel.indexOf("@")||s)n.className=n.className.replace("@"+l.attr,""),s&&(l.attr=!1);m.push({n:n,cspec:l})}}}h=m}d=h;if(c)for(;0<d.length;)if(i=d[0].cspec,h=d[0].n,d.splice(0,1),"str"===i.t)h=z(h,i,!1),A(h,e.length),e[e.length]=y(h.quotefn,
w(i.prop));else{m=w(i.sel);h=z(h,i,!0);k=h.nodes;for(g=0,j=k.length;g<j;g++)p=k[g],n=x(p,!1,c,d),e[e.length]=y(h.quotefn,H(i.sel,m,n)),h.nodes=[p],A(h,e.length-1)}for(o in b)if(b.hasOwnProperty(o)){c=0;d=b[o];i=o.split(/\s*,\s*/);m=i.length;do"function"===typeof d||"string"===typeof d?(o=i[c],h=z(a,o,!1),A(h,e.length),e[e.length]=y(h.quotefn,w(d))):I(a,o,d,e);while(++c<m)}a=C(a);a=a.replace(/<([^>]+)\s(value\=""|selected)\s?([^>]*)>/ig,"<$1 $3>");a=a.split(F).join("");a=a.split(G);for(c=1;c<a.length;c++)b=
a[c],r[c]=e[parseInt(b,10)],a[c]=b.substring(b.indexOf(":")+1);return D(a,r)}function L(a,b,c){var d=x((c||this[0]).cloneNode(!0),a,b);return function(a){return d({context:a})}}function M(a,b){for(var c="function"===typeof b&&b,d=0,k=this.length;d<k;d++)this[d]=J(this[d],(c||e.compile(b,!1,this[d]))(a,!1));context=null;return this}function N(a,b){for(var c=e.compile(b,a,this[0]),d=0,k=this.length;d<k;d++)this[d]=J(this[d],c(a,!1));context=null;return this}function J(a,b){var c,d=a.parentNode,e=0;
d||(d=document.createElement("DIV"),d.appendChild(a));switch(a.tagName){case "TBODY":case "THEAD":case "TFOOT":b="<TABLE>"+b+"</TABLE>";e=1;break;case "TR":b="<TABLE><TBODY>"+b+"</TBODY></TABLE>";e=2;break;case "TD":case "TH":b="<TABLE><TBODY><TR>"+b+"</TR></TBODY></TABLE>",e=3}tmp=document.createElement("SPAN");tmp.style.display="none";document.body.appendChild(tmp);tmp.innerHTML=b;for(c=tmp.firstChild;e--;)c=c.firstChild;d.insertBefore(c,a);d.removeChild(a);document.body.removeChild(tmp);return c}
var u=[],e=e||K();switch(typeof b){case "string":u=e.find(c||document,b);0===u.length&&k('The template "'+b+'" was not found');break;case "undefined":k("The root of the template is undefined, check your selector");break;default:u=b}for(var r=0,b=u.length;r<b;r++)e[r]=u[r];e.length=b;var G="_s"+Math.floor(1E6*Math.random())+"_",F="_a"+Math.floor(1E6*Math.random())+"_",E=/^(\+)?([^\@\+]+)?\@?([^\+]+)?(\+)?$/,Q={IMG:"src",INPUT:"value"},B=Array.isArray?function(a){return Array.isArray(a)}:function(a){return"[object Array]"===
Object.prototype.toString.call(a)};return e};$p.plugins={};
$p.libs={dojo:function(){"undefined"===typeof document.querySelector&&($p.plugins.find=function(b,c){return dojo.query(c,b)})},domassistant:function(){"undefined"===typeof document.querySelector&&($p.plugins.find=function(b,c){return $(b).cssSelect(c)});DOMAssistant.attach({publicMethods:["compile","render","autoRender"],compile:function(b,c){return $p([this]).compile(b,c)},render:function(b,c){return $($p([this]).render(b,c))[0]},autoRender:function(b,c){return $($p([this]).autoRender(b,c))[0]}})},
jquery:function(){"undefined"===typeof document.querySelector&&($p.plugins.find=function(b,c){return jQuery(b).find(c)});jQuery.fn.extend({directives:function(b){this._pure_d=b;return this},compile:function(b,c){return $p(this).compile(this._pure_d||b,c)},render:function(b,c){return jQuery($p(this).render(b,this._pure_d||c))},autoRender:function(b,c){return jQuery($p(this).autoRender(b,this._pure_d||c))}})},mootools:function(){"undefined"===typeof document.querySelector&&($p.plugins.find=function(b,
c){return $(b).getElements(c)});Element.implement({compile:function(b,c){return $p(this).compile(b,c)},render:function(b,c){return $p([this]).render(b,c)},autoRender:function(b,c){return $p([this]).autoRender(b,c)}})},prototype:function(){"undefined"===typeof document.querySelector&&($p.plugins.find=function(b,c){b=b===document?b.body:b;return"string"===typeof b?$$(b):$(b).select(c)});Element.addMethods({compile:function(b,c,e){return $p([b]).compile(c,e)},render:function(b,c,e){return $p([b]).render(c,
e)},autoRender:function(b,c,e){return $p([b]).autoRender(c,e)}})},sizzle:function(){"undefined"===typeof document.querySelector&&($p.plugins.find=function(b,c){return Sizzle(c,b)})},sly:function(){"undefined"===typeof document.querySelector&&($p.plugins.find=function(b,c){return Sly(c,b)})},yui:function(){"undefined"===typeof document.querySelector&&YUI().use("node",function(b){$p.plugins.find=function(c,e){return b.NodeList.getDOMNodes(b.one(c).all(e))}});YUI.add("pure-yui",function(b){b.Node.prototype.directives=
function(b){this._pure_d=b;return this};b.Node.prototype.compile=function(b,e){return $p([this._node]).compile(this._pure_d||b,e)};b.Node.prototype.render=function(c,e){return b.one($p([this._node]).render(c,this._pure_d||e))};b.Node.prototype.autoRender=function(c,e){return b.one($p([this._node]).autoRender(c,this._pure_d||e))}},"0.1",{requires:["node"]})}};
(function(){var b="undefined"!==typeof dojo&&"dojo"||"undefined"!==typeof DOMAssistant&&"domassistant"||"undefined"!==typeof jQuery&&"jquery"||"undefined"!==typeof MooTools&&"mootools"||"undefined"!==typeof Prototype&&"prototype"||"undefined"!==typeof Sizzle&&"sizzle"||"undefined"!==typeof Sly&&"sly"||"undefined"!==typeof YUI&&"yui";b&&$p.libs[b]();"undefined"!==typeof exports&&(exports.$p=$p)})();